import requests
from bs4 import BeautifulSoup
import pickle


file=open("ShirtsM.dat","wb")
url = "https://www2.hm.com/en_in/men/shop-by-product/shirts.html?srsltid=AfmBOoo7oQh7wDzOUvuOsJ58zAXve44vMWhy9hRgjwpZjCa7Oe6ter2m"  # üîÅ Replace with the website you want to scrape
headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
}
response = requests.get(url, headers=headers)
if response.status_code == 200:
    soup = BeautifulSoup(response.text, 'html.parser')
    
    
    
    products=soup.find(id="products-listing-section").find_all('li')
    for product in products:
        img=product.find('div',class_='b5b710')
        info=product.find('div',class_="cbf5f5")
        title=info.find('H2').text
        price=info.find('p').find('span').text
        df={
            "img":img["src"],
            "title":title,
            "price":price
            }
        pickle.dump(df,file);


else:
    print(f"Failed to retrieve page. Status code: {response.status_code}")
